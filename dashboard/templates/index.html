<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Bot Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ¤– Trading Bot Dashboard</h1>
            <div class="header-controls">
                <div class="status-indicator">
                    <span id="status-dot" class="dot"></span>
                    <span id="status-text">Conectando...</span>
                </div>
                <div class="bot-controls">
                    <button id="start-btn" class="btn btn-success" onclick="startBot()">â–¶ï¸ Iniciar</button>
                    <button id="stop-btn" class="btn btn-danger" onclick="stopBot()">â¸ï¸ Pausar</button>
                </div>
            </div>
        </header>

        <!-- Account Info -->
        <section class="card">
            <h2>ğŸ’¼ Estado de la Cuenta</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Balance</div>
                    <div class="stat-value" id="balance">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Disponible</div>
                    <div class="stat-value" id="available">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Margen Usado</div>
                    <div class="stat-value" id="margin-used">â‚¬0.00</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">% Margen</div>
                    <div class="stat-value" id="margin-percent">0%</div>
                </div>
            </div>
        </section>

        <!-- Positions -->
        <section class="card">
            <div class="card-header-with-actions">
                <h2>ğŸ“Š Posiciones Abiertas (<span id="positions-count">0</span>)</h2>
                <button class="btn btn-secondary" onclick="exportTrades()">ğŸ“¥ Export Trades</button>
            </div>
            <div id="positions-container">
                <p class="loading">Cargando posiciones...</p>
            </div>
        </section>

        <!-- Configuration -->
        <section class="card">
            <h2>âš™ï¸ ConfiguraciÃ³n</h2>
            <div class="config-grid" id="config-container">
                <p class="loading">Cargando configuraciÃ³n...</p>
            </div>
        </section>

        <!-- Export Section -->
        <section class="card">
            <h2>ğŸ“¤ Exportar Datos</h2>
            <div class="export-grid">
                <button class="btn btn-primary" onclick="exportBacktest()">
                    ğŸ“Š Backtest Results
                </button>
                <button class="btn btn-primary" onclick="exportTrades()">
                    ğŸ’¼ Trading History
                </button>
                <button class="btn btn-primary" onclick="exportLogs()">
                    ğŸ“ Bot Logs
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <p>Ãšltima actualizaciÃ³n: <span id="last-update">--:--:--</span></p>
            <p>Auto-refresh cada 10 segundos</p>
        </footer>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast"></div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>